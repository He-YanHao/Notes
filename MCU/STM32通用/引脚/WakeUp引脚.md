STM32的WakeUp引脚是一项关键的低功耗功能，它能让芯片在深度睡眠状态下被外部事件唤醒，非常适合电池供电或需要节能的应用场景。

下表汇总了STM32中可用于唤醒的典型引脚，但**具体型号的引脚数量和支持的低功耗模式，请务必查阅对应型号的参考手册**。

| STM32 系列  | 支持唤醒的典型引脚 (WakeUp Pin)                    | 支持的低功耗模式 (典型)                 |
| :---------- | :------------------------------------------------- | :-------------------------------------- |
| **STM32F1** | PA0 (WKUP_PIN1)                                    | 待机模式 (STANDBY)                      |
| **STM32L4** | PA0 (PIN1), PC13 (PIN2), PA2 (PIN4), PC5 (PIN5) 等 | 待机模式 (STANDBY), 关机模式 (SHUTDOWN) |

### 💡 认识WakeUp引脚与工作原理

WakeUp引脚通常是特定的GPIO引脚，其核心功能是检测**上升沿**或**下降沿**信号。当STM32进入如待机模式（STANDBY）或关机模式（SHUTDOWN）这类深度低功耗模式时，内核时钟甚至电源都会关闭，绝大部分功能停止工作。此时，专用的WakeUp引脚仍在“监听”，一旦检测到预设的电平跳变，就会产生信号，将芯片从睡眠中唤醒，使其恢复正常工作模式。

从待机模式唤醒后，微控制器的代码执行会**类似于复位**，程序会从头开始执行。而从停机模式（STOP）唤醒后，程序则会从进入停机的位置继续运行。

### ⚙️ 配置与使用要点

配置WakeUp引脚通常遵循几个步骤，具体代码因开发方式（寄存器、标准库、HAL库）而异：

1.  **使能电源时钟**：在对电源控制寄存器进行任何配置前，必须先使能电源时钟（PWR）。
2.  **配置GPIO为唤醒源**：将特定的WakeUp引脚（如PA0）设置为输入模式，并明确其有效的唤醒边沿（如上升沿）。
3.  **进入低功耗模式**：设置系统控制寄存器中的`SLEEPDEEP`位，配置电源控制寄存器（如`PDDS`位选择待机模式），然后执行`WFI`（等待中断）或`WFE`（等待事件）指令进入低功耗模式。
4.  **清除唤醒标志**：唤醒后，需要清除相应的唤醒标志位，以便下次能正确进入低功耗模式。

### 🔧 重要实践提示

-   **内部下拉电阻**：当使能某个引脚（如PA0）的唤醒功能后，STM32可能会在内部强制将该引脚配置为**输入下拉模式**（例如存在约40kΩ的下拉电阻）。这意味着如果该引脚在硬件上悬空，可能会因干扰产生误唤醒。一个可靠的实践是**在外部增加一个上拉电阻**，确保引脚在不被主动驱动时保持稳定的已知状态。
-   **实现长按唤醒逻辑**：单纯的边沿检测可能无法区分短时误触和真正的唤醒意图。要实现“长按3秒唤醒”这类功能，需要在软件中增加判断逻辑。基本思路是：在初始化时或唤醒后，检测WakeUp引脚的电平并计时，只有确认高电平（或低电平）持续足够长的时间，才认为是有效唤醒，否则再次进入待机模式。
-   **唤醒后的程序流程**：务必理解从**待机模式唤醒后程序会复位重启**。如果需要记住唤醒前的状态，可以考虑使用**备份寄存器**（Backup Register），因为这部分区域在待机模式下通常也能保持数据。

### 💎 核心总结

STM32的WakeUp引脚是实现超低功耗应用的关键。使用时需注意其硬件特性（如内部下拉），并通过软件逻辑（如长按判断）增强可靠性。不同的低功耗模式（待机、停机）在唤醒后的行为不同，这是设计时需要重点考虑的。

希望这些信息能帮助你。如果你正在使用某个特定的STM32型号，可以告诉我，或许我能提供更具体的信息。