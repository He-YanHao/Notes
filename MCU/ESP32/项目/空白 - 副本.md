```c
typedef struct ota_object {
    ota_type_t type;              // 传输类型标识
    void *ctx;                    // 类型特定上下文
    const struct ota_ops *ops;    // 虚函数表
    ota_task_fn task_entry;       // 任务入口函数
    void *task_handle;            // 任务句柄
    uint8_t *buffer;              // 数据缓冲区
    uint32_t buffer_size;         // 缓冲区大小
    int running;                  // 运行状态标志
} ota_object_t;
struct wifi_ota_ctx {
    int socket_fd;           // Socket文件描述符
    char server_ip[32];      // 服务器IP
    uint16_t server_port;    // 服务器端口
    uint32_t timeout_ms;     // 超时设置
};
struct ble_ota_ctx {
    int conn_handle;         // 连接句柄
    uint16_t mtu;            // MTU大小
    uint16_t service_uuid;   // 服务UUID
    uint16_t char_uuid;      // 特征UUID
};
static const struct ota_ops ble_ota_ops = {
    .init = ble_ota_init,           // BLE初始化
    .start = NULL,                  // 可选实现
    .stop = NULL,                   // 可选实现  
    .send_chunk = ble_ota_send_chunk, // BLE数据发送
    .destroy = ble_ota_destroy,     // 资源清理
};
// WiFi对象创建
ota_object_t *ota_create_wifi(const char *ip, uint16_t port) {
    ota_object_t *obj = malloc(sizeof(ota_object_t));
    // 设置WiFi特定参数
    obj->type = OTA_TYPE_WIFI;
    obj->ctx = wifi_ctx;
    obj->ops = &wifi_ota_ops;
    obj->task_entry = ota_task_worker;  // 统一任务函数
    return obj;
}
```

