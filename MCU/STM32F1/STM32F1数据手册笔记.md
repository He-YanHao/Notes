# STM32F103C8T6

## 综述

### 名称含义：

**STM32F103C8T6**

STM32 = 基于ARM®核心的32位微控制器

F = 通用类型 产品子系列

103 = 增强型 

C = 引脚数目48脚

8 = 64K字节的闪存存储器 

T = LQFP封装

6 = 工业级温度范围，-40°C~85°C

### 常用缩写

read / write (rw)	软件能读写此位。

read-only (r) 	软件只能读此位。

write-only (w) 	软件只能写此位，读此位将返回复位值。

read/clear (rc_w1) 	软件可以读此位，也可以通过写’1’清除此位，写’0’对此位无影响。

read / clear (rc_w0) 	软件可以读此位，也可以通过写’0’清除此位，写’1’对此位无影响。

read / clear by read (rc_r) 	软件可以读此位；读此位将自动地清除它为’0’，写’0’对此位无影响。

read / set (rs) 	软件可以读也可以设置此位，写’0’对此位无影响。

read-only write trigger (rt_w) 	软件可以读此位；写’0’或’1’触发一个事件但对此位数值没有影响。

toggle (t) 	软件只能通过写’1’来翻转此位，写’0’对此位无影响。

Reserved(Res.) 	保留位，必须保持默认值不变



STM32F103C8T6为中容量产品，是指闪存存储器容量在64K至128K字节之间的STM32F101xx、STM32F102xx和STM32F103xx微控制器。





## 储存器架构 ## 

在小容量、中容量和大容量产品中，主系统由以下部分构成：

●  四个驱动单元：─    Cortex™-M3内核DCode总线(D-bus)，和系统总线(S-bus) ─通用DMA1和通用DMA2 

●  四个被动单元─内部SRAM ─内部闪存存储器─    FSMC    ─    AHB到APB的桥(AHB2APBx)，它连接所有的APB设备25/754这些都是通过一个多级的AHB总线构架相互连接的，如下图图1所示：图1系统结构在互联型产品中，主系统由以下部分构成：

●  五个驱动单元：─    Cortex™-M3内核DCode总线(D-bus)，和系统总线(S-bus) ─通用DMA1和通用DMA2 ─以太网DMA 

●  三个被动单元─内部SRAM ─内部闪存存储器─    AHB到APB的桥(AHB2APBx)，它连接所有的APB设备这些都是通过一个多级的AHB总线构架相互连接的









### 启动模式

| BOOT1 | BOOT0 | 启动模式说明 | 说明                       |
| ----- | ----- | ------------ | -------------------------- |
| X     | 0     | 主闪存存储器 | 主闪存存储器被选为启动区域 |
| 0     | 1     | 系统存储器   | 系统存储器被选为启动区域   |
| 1     | 1     | 内置SRAM     | 内置SRAM被选为启动区域     |

在系统复位后，SYSCLK的第4个上升沿，BOOT引脚的值将被锁存。

用户可以通过设置BOOT1和BOOT0引脚的状态，来选择在复位后的启动模式。

在从待机模式退出时，BOOT引脚的值将被被重新锁存；因此，在待机模式下BOOT引脚应保持为需要的启动配置。

在启动延迟之后，CPU从地址0x0000  0000获取堆栈顶的地址，并从启动存储器的0x0000 0004指示的地址开始执行代码。 

因为固定的存储器映像，代码区始终从地址0x0000  0000开始(通过ICode和DCode总线访问)，而数据区(SRAM)始终从地址0x2000  0000开始(通过系统总线访问)。

Cortex-M3的CPU始终从ICode总线获取复位向量，即启动仅适合于从代码区开始(典型地从Flash启动)。

STM32F10xxx微控制器实现了一个特殊的机制，系统可以不仅仅从Flash存储器或系统存储器启动，还可以从内置SRAM启动。根据选定的启动模式，主闪存存储器、系统存储器或SRAM可以按照以下方式访问：

- 从主闪存存储器启动：主闪存存储器被映射到启动空间(0x0000 0000)，但仍然能够在它原有的地址(0x0800 0000)访问它，即闪存存储器的内容可以在两个地址区域访问，0x0000 0000或0x0800 0000。
- 从系统存储器启动：系统存储器被映射到启动空间(0x0000 0000)，但仍然能够在它原有的地址(互联型产品原有地址为0x1FFF B000，其它产品原有地址为0x1FFF F000)访问它。
- 从内置SRAM启动：只能在0x2000 0000开始的地址区访问SRAM。注意：  当从内置SRAM启动，在应用程序的初始化代码中，必须使用NVIC的异常表和偏移寄存器，重新映射向量表至SRAM中。





## CRC计算单元

CRC其主要目的就是**验证数据的正确性**。在CRC应用中，还有一个重要的作用：通过 CRC 校验对 FLASH 的完整性进行检查。









## PWR电源控制

### 供电

STM32的工作电压(VDD)为2.0～3.6V。通过内置的电压调节器提供所需的1.8V电源。

当主电源VDD掉电后，通过VBAT脚为实时时钟(RTC)和备份寄存器提供电源。



为了提高转换的精确度，ADC使用一个独立的电源供电，过滤和屏蔽来自印刷电路板上的毛刺干扰。

### 低功耗模式

在系统或电源复位以后，微控制器处于运行状态。当CPU不需继续运行时，可以利用多种低功耗模式来节省功耗，例如等待某个外部事件时。用户需要根据最低电源消耗、最快速启动时间和可用的唤醒源等条件，选定一个最佳的低功耗模式。



- 睡眠模式(Cortex™-M3内核停止，所有外设包括Cortex-M3核心的外设，如NVIC、系统时钟(SysTick)等仍在运行) 
- 停止模式(所有的时钟都已停止)
- 待机模式(1.8V电源关闭)

还可以通过**降低系统时钟**和**关闭APB和AHB总线上未被使用的外设时钟**的方式进一步降低功耗。

进入睡眠模式前，也可以利用预分频器来降低外设的时钟。



## GPIO和AFIO

每个GPI/O端口有两个32位配置寄存器(GPIOx_CRL，GPIOx_CRH)，两个32位数据寄存器(GPIOx_IDR和GPIOx_ODR)，一个32位置位/复位寄存器(GPIOx_BSRR)，一个16位复位寄存器(GPIOx_BRR)和一个32位锁定寄存器(GPIOx_LCKR)。

每个I/O端口位可以自由编程，然而必须按照32位字访问I/O端口寄存器(不允许半字或字节访问)。GPIOx_BSRR和GPIOx_BRR寄存器允许对任何GPIO寄存器进行读/更改的独立访问；这样，在读和更改访问之间产生IRQ时不会发生危险。



首先开启时钟，然后定义结构体，再依此对GPIO口的位置，工作模式，速度进行配置。

位置通过A~E和0~15决定

速度有三个档次

工作模式有八种：

​	其中四种输入四种输出，四种输入为数字输入和模拟输入，根据悬空默认电平分为三种，模拟输入。

​	根据高电平的不同区分开漏和推挽，二者驱动力不同；有片上外设控制输出为复用。


