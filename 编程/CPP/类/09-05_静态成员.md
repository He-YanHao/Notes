# 静态成员

静态成员是类中一种特殊的成员，它与类本身关联，而不是与类的各个对象实例关联。静态成员在所有类的对象之间共享。

## 静态成员变量

### 特点
- 属于类本身，而不是类的任何特定对象
- 所有类的对象共享同一个静态成员变量
- 必须在类外进行定义和初始化（C++17起可以在类内初始化）
- 生命周期贯穿整个程序运行期间

### 语法
```cpp
class MyClass {
public:
    static int staticVar;  // 声明静态成员变量
};

int MyClass::staticVar = 0;  // 定义并初始化静态成员变量
```

### 访问方式
1. 通过类名访问：
   ```cpp
   MyClass::staticVar = 10;
   ```
2. 通过对象访问：
   ```cpp
   MyClass obj;
   obj.staticVar = 20;
   ```

## 静态成员函数

### 特点
- 只能访问静态成员变量和其他静态成员函数
- 不能访问类的非静态成员（因为没有`this`指针）
- 不能使用`const`、`volatile`或`virtual`修饰
- 可以通过类名直接调用，无需创建对象

### 语法
```cpp
class MyClass {
public:
    static void staticFunc() {
        // 只能访问静态成员
        staticVar++;
    }
    
    static int staticVar;
};
```

### 调用方式
1. 通过类名调用：
   ```cpp
   MyClass::staticFunc();
   ```
2. 通过对象调用：
   ```cpp
   MyClass obj;
   obj.staticFunc();
   ```

## 静态成员的应用场景

1. **计数器**：统计创建了多少个类的对象
   ```cpp
   class Counter {
   public:
       Counter() { count++; }
       ~Counter() { count--; }
       static int getCount() { return count; }
   private:
       static int count;
   };
   
   int Counter::count = 0;
   ```

2. **共享资源**：如日志记录器、数据库连接池等

3. **工具函数**：不需要对象实例就能使用的实用函数

4. **常量定义**：在类作用域内定义常量
   ```cpp
   class MathConstants {
   public:
       static const double PI;
   };
   
   const double MathConstants::PI = 3.141592653589793;
   ```

## C++17改进

从C++17开始，可以使用`inline`关键字在类内初始化静态成员变量：

```cpp
class MyClass {
public:
    inline static int staticVar = 0;  // C++17起支持
};
```

## 注意事项

1. 静态成员函数不能是虚函数
2. 静态成员函数没有`this`指针
3. 静态成员变量必须在类外定义（C++17前）
4. 静态成员可以被继承，但仍然是基类的静态成员

静态成员是C++中实现类级别数据和操作的有效方式，合理使用可以提高代码的模块性和效率。