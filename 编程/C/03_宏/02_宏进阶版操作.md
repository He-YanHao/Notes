# 宏进阶版操作

## 含参数的宏

### 含参数的宏

宏定义可以包含参数，比如：

```c
#define square(x) ((x)*(x))
```

在接下来调用 ` square(x) ` 等价于 ` ((x)*(x)) ` 。

这时的 x 是作为参数存在，可以是任何变量类型。

要注意的是，参数化的宏定义是左括号与宏名称之间不能有空格。



### # 字符化

比如说定义了

```C
#define STR(x) #x
```

那么下面的 ` x ` 一般都会以变量的形式处理，如果在前面加上 ` # ` 变成 ` #x ` 就可以视为字符串处理了。

```c
// 示例1：数字 → 字符串
printf("%s\n", STR(123));     // 输出: "123"

// 示例2：标识符 → 字符串  
printf("%s\n", STR(hello));   // 输出: "hello"

// 示例3：表达式 → 字符串
printf("%s\n", STR(1+2*3));   // 输出: "1+2*3"（不是计算结果！）
```



### ## 连接符

如果要用宏申请 ` day1 ` ~  ` day30 `  ，

```c
#define DAY(x) int day##x
int main()
{
	DAY(x);
}
```

可以这样处理。

其中 ` day##x `如果写成 ` dayx ` 则无法识别参数 ` x ` ， ` ## ` 连接左右两边使其成为一个整体，但又能把两边分开识别。

## 自定义

### #error 错误

可以直接给自己定义一个错误。

```c
#error 错误信息 //输出错误信息
```



### #warning 警告

同理，可以给自己定义警告。

```c
#warning 警告信息 //输出警告信息
```



### #line

```c
#line 数字 "文件名"
```

可以将下一行的行号改为 ` 数字 ` ，将文件名改为 ` "文件名" ` 。

