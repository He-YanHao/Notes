# 入门

## 打开文件

```cpp
CMakeLists.txt
//CMake项目配置文件
MyFirstProject.pro
//qmake项目配置文件
```



## 文件结构

初始新建项目有以下默认文件夹和文件，其作用分别是：

- `Forms\`
  - `mainwindow.ui`：Qt Designer UI 文件（XML格式），编译时被 `uic`（User Interface Compiler）转换为 `ui_mainwindow.h`。
- `Header Files\`
  - `mainwindow.h`：声明 `MainWindow` 类（继承自 `QMainWindow`）定义窗口的行为接口和信号槽。
- `Source Files\`
  - `main.cpp`：程序入口文件，创建Qt应用程序实例，初始化主窗口并启动事件循环。
  - `mainwindow.cpp`：C++ 实现文件。实现 `MainWindow` 类的功能。实现具体逻辑。

## 基础代码解析

```
main.cpp             # 程序入口
mainwindow.cpp       # 主窗口实现
mainwindow.h         # 主窗口头文件
mainwindow.ui        # 可视化界面设计文件
```



## main.cpp

```cpp
#include "mainwindow.h"
//包含自定义的主窗口类头文件，该文件定义了应用程序的主界面（通常继承自 QMainWindow）
#include <QApplication>
//包含 Qt 应用程序核心类，提供：事件循环管理 系统级应用程序设置 命令行参数处理

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);//是 Qt 的核心类，代表整个应用程序对象
    //argc：命令行参数数量 argv：命令行参数数组
    //必须且只能有一个 QApplication 实例
    //任何 GUI 相关操作（创建窗口、部件等）之前必须先创建 QApplication
    MainWindow w;
    //创建主窗口实例
    //将窗口标记为可见
    //触发窗口系统资源分配
    w.show();
    //持续检测和处理事件（用户输入、定时器、网络等）
    return a.exec();
}
```



## mainwindow.cpp



```cpp
#include "mainwindow.h"
//自定义主窗口类的声明
#include "./ui_mainwindow.h"
//由 Qt 的 uic 工具自动生成的 UI 类（根据 .ui 文件创建）

//构造函数
MainWindow::MainWindow(QWidget *parent)//构造函数声明
//类名限定符::构造函数名称
    : QMainWindow(parent)     //基类初始化
    , ui(new Ui::MainWindow)  //成员变量初始化
{
    ui->setupUi(this);        //UI设置关键调用
    //
}
//析构函数
MainWindow::~MainWindow()
{
    delete ui;
    //清理UI资源
}

```



## mainwindow.h

```cpp
#ifndef MAINWINDOW_H
#define MAINWINDOW_H
//防重复宏定义

#include <QMainWindow>
//包含 Qt 的主窗口基类头文件
//所有自定义主窗口类必须继承自 QMainWindow

QT_BEGIN_NAMESPACE
//QT_BEGIN_NAMESPACE/QT_END_NAMESPACE：Qt 的宏，确保在定义了 QT_NAMESPACE 时正确封装
namespace Ui {
class MainWindow;
}
QT_END_NAMESPACE
//namespace Ui { class MainWindow; }：前向声明 UI 命名空间中的 MainWindow 类
//避免包含自动生成的 ui_mainwindow.h 头文件
//减少编译依赖，加速编译过程
//前向声明表明 Ui::MainWindow 将在其他地方定义

class MainWindow : public QMainWindow
{
    Q_OBJECT//本质是一个已定义好的宏，所有需要“信号和槽”功能的组件都必须将 Q_OBJECT 作为 private 属性成员引入到类中。
    //宏
    //启用 signals 和 slots 关键字
    //允许声明和实现信号/槽函数
public:
    MainWindow(QWidget *parent = nullptr);
    //标准 Qt 窗口构造函数格式
    //parent = nullptr 表示这是顶级窗口 无父窗口
    ~MainWindow();
    //需要显式声明以正确清理 UI 资源
private:
    Ui::MainWindow *ui;
    //ui 指针：指向 UI 表单生成的对象
    //Ui::MainWindow：由 uic 工具从 .ui 文件自动生成的类
};
//自定义的 MainWindow 类继承自 Qt 的 QMainWindow
//Q_OBJECT 宏：启用 Qt 元对象系统（信号/槽、属性系统等）

#endif // MAINWINDOW_H
```





