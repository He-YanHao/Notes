# 编码器

## 什么是编码器

**编码器** 是一种组合逻辑电路，其功能是将**多个输入信号**转换为**特定编码格式的输出信号**。编码器执行的是多路输入到较少输出线的转换，实现了信息从一种形式到另一种形式的编码过程。

在数字系统中，编码器的主要任务是将2ⁿ个输入数据转换为n位二进制代码输出，从而减少数据传输所需的线路数量。



## 编码器的主要作用

**数据压缩与简化**

*   将多个输入信号（如按键、传感器状态）压缩为较少的输出线，显著**减少连线数量**和硬件复杂度。
*   例如：将16个独立输入信号编码为4位二进制输出，线路数量减少75%。

**地址编码**

*   在存储器和外设接口中，用于生成**地址编码**，识别不同设备或存储单元的位置。
*   通过编码器可以快速确定哪个设备正在请求服务。

**优先级处理**

*   优先级编码器能够识别**最高优先级的输入**，并在多个同时有效的输入中选择最重要的进行处理。
*   在中断控制器和任务调度中具有关键作用。

**键盘扫描与输入检测**

*   在矩阵键盘设计中，编码器用于检测**被按下的按键**并将其位置转换为对应的键值代码。
*   大大简化了多按键输入系统的设计。

**状态监控**

*   将多个设备或传感器的状态信号编码为紧凑的二进制格式，便于处理器读取和判断系统状态。

**数据转换**

*   将一种编码格式转换为另一种编码格式，如将十进制输入转换为BCD码或二进制码输出。



## 编码器的类型

### 普通编码器

**特点**
*   任何时刻**只允许一个输入信号有效**
*   如果有多个输入同时有效，输出将产生错误编码
*   电路简单，成本低

**典型应用**
*   简单的开关输入系统
*   互斥选择电路
*   单一事件检测

**4线-2线普通编码器真值表**
```
| I3 I2 I1 I0 | Y1 Y0 |
|-------------|-------|
| 0  0  0  1  | 0  0  |
| 0  0  1  0  | 0  1  |
| 0  1  0  0  | 1  0  |
| 1  0  0  0  | 1  1  |
```

### 优先级编码器

**特点**
*   允许多个输入同时有效
*   按照预设的**优先级顺序**对最高优先级输入进行编码
*   通常输入编号越大，优先级越高

**优点**
*   解决了多个输入同时有效的问题
*   适用于中断请求、任务调度等需要优先级处理的场合

**典型应用**
*   计算机中断控制系统
*   实时系统中的事件处理
*   多源请求仲裁电路

**4线-2线优先级编码器真值表**
```
| I3 I2 I1 I0 | Y1 Y0 | V  |
|-------------|-------|----|
| 0  0  0  0  | X  X  | 0  |
| 0  0  0  1  | 0  0  | 1  |
| 0  0  1  X  | 0  1  | 1  |
| 0  1  X  X  | 1  0  | 1  |
| 1  X  X  X  | 1  1  | 1  |
```
（V为有效输出标志，X表示任意值）

### 二进制编码器

**特点**
*   将输入转换为标准的**二进制代码**输出
*   输入数量为2ⁿ，输出为n位二进制数

**应用**
*   地址编码
*   数据选择
*   状态编码

### BCD编码器

**特点**
*   将10个十进制数字输入（0-9）转换为**4位BCD码**输出
*   常用于数字显示系统和十进制输入设备

**应用**
*   键盘编码
*   数字开关输入
*   计算器输入电路



## 编码器的关键技术参数

**分辨率**
*   编码器能够区分的输入数量，通常为2ⁿ个输入
*   例如：8输入编码器的分辨率为8

**输出位数**
*   编码输出的二进制位数，由输入数量决定：n = log₂(输入数)

**传播延迟**
*   从输入变化到输出稳定的时间，影响系统的**最高工作频率**

**优先级方案**
*   对于优先级编码器，定义的输入优先级顺序
*   固定优先级或可编程优先级

**使能控制**
*   使能输入端，用于控制编码器的工作状态
*   便于多个编码器级联扩展

**有效标志输出**
*   指示当前是否有有效输入的信号
*   在级联应用中特别重要



## 集成芯片应用（以74HC148为例）

**引脚配置**
```
// 8输入优先级编码器
输入：I0-I7（低有效，I7优先级最高）
输出：Y0-Y2（二进制编码，低有效）
控制：EI（使能输入，低有效）
标志：GS（组选择输出，低有效）
     EO（使能输出，用于级联）
```

**级联扩展示例**
```
将两个74HC148扩展为16输入优先级编码器：
- 高位片的EO连接到低位片的EI
- 输出通过额外逻辑组合
- GS信号标识任意输入有效
```

**PCB布局要点**
*   将编码器芯片靠近输入信号源，减少引线长度
*   为每个输入信号提供适当的滤波和保护
*   确保电源去耦电容紧靠芯片电源引脚
*   输出信号线匹配阻抗，保证信号完整性

编码器作为数字系统中的基础构建模块，其正确设计与应用对于系统性能、可靠性和成本都具有重要影响。