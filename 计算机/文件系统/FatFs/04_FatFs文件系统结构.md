# FatFs文件系统结构

## 前三个块数据结构

### 块0

```
eb 58 90 4d 53 44 4f 53 35 2e 30  0  2 20 38  c  2  0  0  0  0 f8  0  0 3f  0 ff  0  0  0  0  0 
 0 b8 9e  3 e4 39  0  0  0  0  0  0  2  0  0  0  1  0  6  0  0  0  0  0  0  0  0  0  0  0  0  0 
80  0 29 42 f8 80 5a 4e 4f 20 4e 41 4d 45 20 20 20 20 46 41 54 33 32 20 20 20 33 c9 8e d1 bc f4 
7b 8e c1 8e d9 bd  0 7c 88 56 40 88 4e  2 8a 56 40 b4 41 bb aa 55 cd 13 72 10 81 fb 55 aa 75  a 
f6 c1  1 74  5 fe 46  2 eb 2d 8a 56 40 b4  8 cd 13 73  5 b9 ff ff 8a f1 66  f b6 c6 40 66  f b6 
d1 80 e2 3f f7 e2 86 cd c0 ed  6 41 66  f b7 c9 66 f7 e1 66 89 46 f8 83 7e 16  0 75 39 83 7e 2a 
 0 77 33 66 8b 46 1c 66 83 c0  c bb  0 80 b9  1  0 e8 2c  0 e9 a8  3 a1 f8 7d 80 c4 7c 8b f0 ac 
84 c0 74 17 3c ff 74  9 b4  e bb  7  0 cd 10 eb ee a1 fa 7d eb e4 a1 7d 80 eb df 98 cd 16 cd 19 
66 60 80 7e  2  0  f 84 20  0 66 6a  0 66 50  6 53 66 68 10  0  1  0 b4 42 8a 56 40 8b f4 cd 13 
66 58 66 58 66 58 66 58 eb 33 66 3b 46 f8 72  3 f9 eb 2a 66 33 d2 66  f b7 4e 18 66 f7 f1 fe c2 
8a ca 66 8b d0 66 c1 ea 10 f7 76 1a 86 d6 8a 56 40 8a e8 c0 e4  6  a cc b8  1  2 cd 13 66 61  f 
82 74 ff 81 c3  0  2 66 40 49 75 94 c3 42 4f 4f 54 4d 47 52 20 20 20 20  0  0  0  0  0  0  0  0 
 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 
 0  0  0  0  0  0  0  0  0  0  0  0  d  a 44 69 73 6b 20 65 72 72 6f 72 ff  d  a 50 72 65 73 73 
20 61 6e 79 20 6b 65 79 20 74 6f 20 72 65 73 74 61 72 74  d  a  0  0  0  0  0  0  0  0  0  0  0 
 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 ac  1 b9  1  0  0 55 aa 
```

### 块1

```
52 52 61 41 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 72 72 41 61 bb f1 1c 0 7 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 55 aa 
```

### 块2

```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 55 aa 
```

## MBR

MBR 由 446 个字节的引导代码、64 字节的主分区（4 个）表及两个字节的签名值“55 AA”组成。

```
eb 58 90
标准短跳转指令（x86 boot）


4d 53 44 4f 53 35 2e 30
"MSDOS5.0"


0  2
每扇区字节数（偏移 0x0B）
小端 → 0x0200 = 512




20
每簇扇区数（偏移 0x0D）
每簇 = 32 × 512 = 16KB



38  c
保留扇区数（偏移 0x0E）
小端 → 0x0C38 = 3128


2
FAT 表个数（偏移 0x10）
2 份 FAT


0  0
0  0
FAT16 相关字段 = 0（说明是 FAT32）


f8
媒体描述符（偏移 0x15）


0
FAT16 扇区数 = 0（再次确认 FAT32）


0 3f
0 ff
每磁道扇区数 / 磁头数（偏移 0x18）
经典 CHS 填充值
仅用于兼容，FatFs 不靠它

0  0  0  0  0
保留


 0 b8 9e  3
总扇区数（偏移 0x20）
小端 → 0x039EB800 = 60,000,000 左右（约）
对应 ~30GB 容量



e4 39  0  0
FAT32 每 FAT 扇区数（偏移 0x24）

0  0  0  0

2  0  0  0
根目录起始簇（偏移 0x2C）


1  0
FSInfo 扇区号（偏移 0x30）


6  0
备份 Boot Sector（偏移 0x32）


0  0  0  0  0  0  0  0  0  0  0  0 
80  0 29 42 f8 80 5a


4e 4f 20 4e 41 4d 45 20 20 20 20
卷标 & 文件系统字符串（偏移 0x47）
"NO NAME    "


46 41 54 33 32 20 20 20
"FAT32   "


33 c9 8e d1 bc f4 
7b 8e c1 8e d9 bd  0 7c 88 56 40 88 4e  2 8a 56 40 b4 41 bb aa 55 cd 13 72 10 81 fb 55 aa 75  a 
f6 c1  1 74  5 fe 46  2 eb 2d 8a 56 40 b4  8 cd 13 73  5 b9 ff ff 8a f1 66  f b6 c6 40 66  f b6 
d1 80 e2 3f f7 e2 86 cd c0 ed  6 41 66  f b7 c9 66 f7 e1 66 89 46 f8 83 7e 16  0 75 39 83 7e 2a 
 0 77 33 66 8b 46 1c 66 83 c0  c bb  0 80 b9  1  0 e8 2c  0 e9 a8  3 a1 f8 7d 80 c4 7c 8b f0 ac 
84 c0 74 17 3c ff 74  9 b4  e bb  7  0 cd 10 eb ee a1 fa 7d eb e4 a1 7d 80 eb df 98 cd 16 cd 19 
66 60 80 7e  2  0  f 84 20  0 66 6a  0 66 50  6 53 66 68 10  0  1  0 b4 42 8a 56 40 8b f4 cd 13 
66 58 66 58 66 58 66 58 eb 33 66 3b 46 f8 72  3 f9 eb 2a 66 33 d2 66  f b7 4e 18 66 f7 f1 fe c2 
8a ca 66 8b d0 66 c1 ea 10 f7 76 1a 86 d6 8a 56 40 8a e8 c0 e4  6  a cc b8  1  2 cd 13 66 61  f 
82 74 ff 81 c3  0  2 66 40 49 75 94 c3 42 4f 4f 54 4d 47 52 20 20 20 20  0  0  0  0  0  0  0  0 
 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 
 0  0  0  0  0  0  0  0  0  0  0  0  d  a 44 69 73 6b 20 65 72 72 6f 72 ff  d  a 50 72 65 73 73 
20 61 6e 79 20 6b 65 79 20 74 6f 20 72 65 73 74 61 72 74  d  a  0  0  0  0  0  0  0  0  0  0  0 
 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 ac  1 b9  1  0  0
 
 
 
55 aa
Boot Sector 签名
```



