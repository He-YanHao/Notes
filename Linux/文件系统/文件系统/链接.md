# 链接

## 软链接

软链接像是一个 Windows 的“快捷方式”。它是一个独立的特殊文件，这个文件的内容是**另一个文件的路径**。

创建软链接时，系统会创建一个新的 inode 和一个新的文件。这个新文件的内容非常简单，只有它指向的目标文件的路径字符串。当你访问软链接时，系统会读取这个路径，然后去访问路径所指的实际文件。

**有额外的权限和大小**：软链接有自己的权限（通常是 `lrwxrwxrwx`，开头的 `l` 表示链接）和大小（大小就是它存储的路径名的字符长度）。

## 硬链接

**硬链接本质上就是同一个 inode 的多个名字。** 它不是一个特殊的文件，而只是一个目录条目（记录），这个条目将一个新的文件名关联到一个已经存在的 inode 上。

创建硬链接时，系统并不是复制文件内容，而是创建一个新的文件名指向**同一个 inode**。

因此，硬链接和原始文件是完全平等的，无法区分谁是原始文件、谁是链接。

硬链接大小与原始文件相同（因为是同一个文件）。

删除其中一个文件名（无论是原始文件还是任何一个硬链接），只要还有文件名指向这个 inode，文件的数据就不会被真正删除。只有指向该 inode 的所有文件名都被删除后，inode 才会被释放，数据块才会被标记为可重用。

**无法跨文件系统**：因为 inode 编号在同一个文件系统内是唯一的，但在不同文件系统中可能重复。因此，你不能在磁盘A上创建一个指向磁盘B上文件的硬链接。

**无法链接目录**：大多数操作系统不允许为目录创建硬链接，以防止在目录树中创建循环引用，这会导致文件系统工具（如 `find`, `tar`）陷入无限循环。

