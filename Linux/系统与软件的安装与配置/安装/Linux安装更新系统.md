# Linux安装更新系统

## 挂载点

首先需要`/boot/efi`，用于启动UEFI， 512MB即可，必须为FAT32格式以供兼容性。

接下来为`/`，系统根目录，若不挂载其他区域，系统会从中分配出其他区域空间，挂载好这个之后达到开机最低要求。

接下来为可选挂载点：

- `/boot`：用于存储和启动内核以及引导文件，2GB大小，若不独立分配系统会从`/`分区分配。

	过去`/boot`一般需要独立分区，因为传统BIOS不足以访问`/`分区，而现代UEFI可以访问`/`分区，并从中读取本因存储在`/boot`分区的数据，因此可以不独立分区。
	但若需要对`/boot`分区进行加密，则现代UEFI依旧没有能力访问加密后的`/boot`，此时需要独立分区。

- `swap`作为交换分区，推荐为设备内存大小+2GB，内存大于32GB则无需交换分区。挂载点无，或无法选择挂载点。

- `/usr`：一般不建议独立分区，系统会从`/`里自动分配，如果单独分区，需要分配**非常大的空间**（几十GB到数百GB），因为它包含了几乎所有软件。
- `/var`：建议独立分区，用于存放日志等高度变化的文件，独立分区后日志或缓存失控增长仅会拖垮这个分区而非整个系统。
- `/home`：存储软件配置和用户个人文件。

| 挂载点    | 名称         | 格式     | 作用                                                         | 大小要求                     |
| --------- | ------------ | -------- | ------------------------------------------------------------ | ---------------------------- |
| /boot/efi | EFI系统分区  | FAT32    | 存储UEFI启动文件 是硬件与操作系统之间的桥梁                  | 512MB                        |
| /boot     | 引导分区     | EXT4     | 存储 内核 初始内存盘 引导加载程序                            | 2GB                          |
| /         | 根目录       | EXT4/XFS | 系统根目录，核心所在，所有其他挂载点都依附于它。             | 不小于20GB                   |
| swap      | 虚拟内存     | 无格式   | 作为虚拟内存，在物理内存(RAM)不足时使用；支持休眠(Hibernate)到磁盘。 | 内存+2GB 内存>32GB可以不要   |
| /usr      | Unix系统资源 | EXT4/XFS | 包含绝大多数的系统应用程序和只读数据                         | 一般不需要独立               |
| /var      | 可变数据目录 | EXT4/XFS | 经常变化的（Variable）数据文件                               | 桌面：10-20GB；服务器：50GB+ |
| /home     | 用户数据     | EXT4/XFS | 存储所有用户的个人数据、配置文件、下载、桌面文件等。分离数据和系统，重装系统时可保留用户数据。 | 尽可能大                     |

## 系统格式

| 文件系统 | 特点                                     |      |
| -------- | ---------------------------------------- | ---- |
| ext4     | 最主流，均衡可靠，兼容性极佳。           |      |
| xfs      | 高性能，高扩展性，企业级稳定。           |      |
| btrfs    | 功能先进（快照、压缩、校验），现代架构。 |      |

## 更新系统(指常规的软件全面更新)

### Debian系列

| 功能描述           | `apt-get` / `apt-cache` 命令 | `apt` 命令            | 说明                                                   |
| ------------------ | ---------------------------- | --------------------- | ------------------------------------------------------ |
| **更新软件包列表** | sudo apt-get update          | sudo apt update       | `apt` 的输出更有信息量，会显示可升级的软件包数量。     |
| **升级所有软件包** | sudo apt-get upgrade         | sudo apt upgrade      | `apt` 会添加一个漂亮的进度条，并询问确认。             |
| **全面升级**       | sudo apt-get dist-upgrade    | sudo apt full-upgrade | `apt` 的命令名 `full-upgrade` 更直观地反映了它的行为。 |

## 重装Grub

**这套命令主要适用于已经过时的 GRUB Legacy。** 现代 Linux 发行版普遍使用 **GRUB 2**，其命令和操作方式有了很大变化。

```shell
sudo grub				#启动Grub
find /boot/grub/stage1	#查找/boot存放的硬盘分区
root (hdx,y)			#指示/boot分区的位置，将其替换为(hdx,y)
setup (hd0)				#在第一块硬盘上安装Grub
quit					#退出
```







# arch

### arch换源

可以直接执行

```bash
sudo pacman-mirrors -i -c China -m rank
```

换国内源



