# 交换文件

## 与交换分区异同

| 方面     | 交换分区                                           | 交换文件               |
| :------- | :------------------------------------------------- | :--------------------- |
| 性能对比 | 略优（直接磁盘访问），但在SSD+现代内核下差异很小。 | 稍差（通过文件系统层） |
| 灵活性   | 困难                                               | 容易                   |
|          |                                                    |                        |



## 创建

```shell
# 在根目录创建4G大小交换文件
sudo fallocate -l 4G /swapfile

# 权限需要是600
sudo chmod 600 /swapfile

# 将文件格式化为交换文件系统
sudo mkswap /swapfile

# 启用交换文件
sudo swapon /swapfile
# 同理，swapoff是关。

# 写入/etc/fstab里

# 确认交换文件已启用
sudo swapon --show
free -h
```

