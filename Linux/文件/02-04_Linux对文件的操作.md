# Linux对文件的操作

## 创建空文件

```shell
touch filename.txt
```

### touch命令

`touch` 命令的核心功能有两个：

1.  **创建新的空文件**：这是它最广为人知的用法。
2.  **更改已有文件的时间戳**：即修改文件的访问和修改时间。这也是它名字 `touch`（触碰）的由来

**基本语法**

```bash
touch [选项] 文件
```

**核心功能与常用选项**

`touch` 的选项主要围绕如何设置文件的时间戳。

| 选项 | 作用                                                         |
| :--- | :----------------------------------------------------------- |
| `-a` | 只更改文件的**访问时间**（access time）。                    |
| `-m` | 只更改文件的**修改时间**（modify time）。                    |
| `-c` | **不创建新文件**。如果文件不存在，则不进行任何操作（静默跳过），也不会报错。 |
| `-d` | 使用指定的字符串来表示时间，而不是当前时间。功能非常强大和灵活。 |
| `-t` | 使用指定的 `[[CC]YY]MMDDhhmm[.ss]` 格式来设置时间戳。        |
| `-r` | 使用**参考文件**的时间戳，而不是当前时间。                   |
| `-h` | 影响符号链接本身（而不是它指向的文件）。通常与 `-r` 等选项一起使用。 |

### 时间戳

Linux 文件通常有三种时间戳：

*   **访问时间 （atime）**：最后一次读取文件内容的时间。
    *   例如：用 `cat`, `less`, `vim` 查看文件后会更新。
*   **修改时间 （mtime）**：最后一次**修改文件内容**的时间。
    *   例如：用 `vim` 编辑并保存文件后会更新。这是最常用的时间，`ls -l` 默认显示的就是它。
*   **改变时间 （ctime）**：最后一次**改变文件元数据**（如权限、所有者等）的时间。
    *   例如：用 `chmod`, `chown` 命令后会更新。**注意：`touch` 命令无法直接修改 ctime**，因为修改 atime 或 mtime 这个行为本身就会导致 ctime 被更新为当前时间。

### 更改时间戳（核心功能）

*   **将文件的时间戳更新为当前系统时间（默认行为）**：
    ```bash
    touch existing_file.txt
    # 如果文件已存在，这条命令不会清空文件内容，只会更新时间戳。
    ```

*   **只更改文件的访问时间（atime）为当前时间**：
    ```bash
    touch -a existing_file.txt
    ```

*   **只更改文件的修改时间（mtime）为当前时间**：
    ```bash
    touch -m existing_file.txt
    ```

*   **使用参考文件的时间戳**：将 `file1.txt` 的时间戳设置得和 `reference_file.log` 一模一样。
    ```bash
    touch -r reference_file.log file1.txt
    ```
    这在需要同步文件时间时非常有用。

*   **使用自定义时间字符串（非常灵活）**：
    ```bash
    touch -d "2023-01-15 08:30:00" file.txt
    touch -d "next Tuesday" file.txt
    touch -d "2 days ago" file.txt
    touch -d "yesterday" file.txt
    ```
    `-d` 选项可以解析非常多的自然语言日期格式，功能强大。

*   **使用精确的时间格式**：将时间戳设置为 `2023年12月31日23点59分59秒`。
    ```bash
    touch -t 202312312359.59 file.txt
    # 格式：[[CC]YY]MMDDhhmm[.ss]
    # CC 世纪，YY 年份后两位，MM 月，DD 日，hh 时，mm 分，ss 秒
    ```

### 避免创建新文件

*   **只在文件存在时更新时间戳**：如果 `maybe_exists.txt` 不存在，则什么都不做，也不报错。
    ```bash
    touch -c maybe_exists.txt
    ```

