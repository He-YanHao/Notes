# 编码器

## 什么是编码器？

**编码器**是一种将机械运动的位置、速度和方向转换成电信号的传感器，这些电信号可以被控制系统（如PLC、单片机）解读为数字信息。

*   **核心功能**：**测量和反馈**。它告诉系统：“电机轴目前转到了多少度”、“移动平台走了多远”、“速度是多快”。
*   **关键作用**：实现**闭环控制**。系统发出指令驱动电机，编码器则实时测量实际执行结果并反馈给控制器，控制器根据误差进行调整，从而实现高精度的运动控制。



## 编码器如何工作？

光栅与脉冲的原理



## 主要分类及特点

编码器有多种分类方式，最常见的是按工作原理和输出信号类型划分。

### 按测原理分类

*   **光学编码器**：最常见、精度最高。使用上述的光电原理。
    *   优点：精度高、响应快。
    *   缺点：对灰尘、油污、振动敏感，成本较高。
*   **磁性编码器**：使用磁铁和磁敏传感器（如霍尔元件）。码盘是磁化有南北极的磁环。
    *   优点：结构坚固，抗污染能力强，成本较低，寿命长。
    *   缺点：精度和分辨率通常低于光学编码器。
*   **电容式编码器**：利用电容的变化来检测位置。新兴技术，结合了光学和磁性的优点：精度高、抗干扰、成本低。



### 按输出信号类型分类（这是最重要的分类）

#### 增量式编码器
*   **工作原理**：输出**连续的脉冲序列**（A相、B相）。它只报告“相对”的位置变化量，即“转了多少角度”，但**无法在通电时知道轴的绝对位置**。
*   **信号输出**：通常输出三路信号：
    *   **A相**：主脉冲序列。
    *   **B相**：与A相相位差90°的脉冲序列。通过比较A、B相的相位先后，可以判断**旋转方向**。
    *   **Z相**（索引信号）：每转一圈发出一个脉冲，用于确定**机械原点**。
*   **特点**：
    *   **优点**：结构简单，成本低，抗干扰能力强。
    *   **缺点**：断电后位置信息丢失，每次上电需“回零”操作寻找参考点。
*   **应用**：广泛用于速度测量、长度测量、相对定位等场合。

#### 绝对式编码器
*   **工作原理**：每个位置都对应一个**独一无二的二进制编码**。通电瞬间就能知道轴的“绝对”位置，无需回零。
*   **信号输出**：输出并行或串行（如SSI, BiSS, EtherCAT）的数字编码。码盘有多圈同心光道，每条光道代表二进制的一位。
*   **特点**：
    *   **优点**：断电不失位，上电即知位置，数据可靠性高。
    *   **缺点**：结构复杂，成本高，分辨率受位数限制（如16位 = 65536个位置/圈）。
*   **应用**：机器人关节、数控机床刀塔、转台、必须知道绝对位置的安全关键场合。



#### 绝对值多圈编码器

*   **工作原理**：是绝对式编码器的增强版。它不仅能记录一圈内的绝对位置，还能通过内部齿轮箱或电子计数记录转动的**圈数**。
*   **特点**：真正意义上的全绝对位置反馈，即使设备断电旋转了多圈，上电后也能立即得到准确的位置信息。
*   **应用**：大型龙门吊、港口起重机、自动化仓库堆垛机等需要记录长距离绝对位置的设备。

**简单来说，选择编码器的关键在于：是否需要断电后仍知道确切位置？**

- **需要，就选绝对式；**
- **不需要，且成本敏感，增量式是性价比更高的选择。**



## 关键性能参数

1.  **分辨率**：编码器每转一圈能输出多少脉冲（PPR）或多少位（Bit）。这是精度的核心指标。例如，1000 PPR的增量编码器，每个脉冲代表360°/1000=0.36°。
2.  **精度**：实际位置与编码器报告位置之间的最大偏差。精度 ≤ 分辨率。
3.  **响应频率**：编码器每秒能响应的最大脉冲数。决定了电机最高转速上限（最高转速 = 响应频率 / 分辨率）。
4.  **输出类型**：集电极开路输出、推挽输出、差分输出（RS422，抗干扰能力强，用于长距离传输）。



## 应用领域

编码器是精密运动控制的心脏，应用极其广泛：

*   **工业机器人**：每个关节都需要高精度的绝对编码器来确定位置。
*   **数控机床**：控制主轴转速和进给轴（X/Y/Z轴）的位置。
*   **伺服电机**：构成闭环控制的核心反馈元件。
*   **3D打印机**：精确控制喷头运动和打印平台位置。
*   **电梯**：平层精准定位。
*   **航空航天**：舵面控制、望远镜转台。
*   **医疗设备**：CT机旋转扫描、机器人手术臂。



### 总结与对比

| 特性         | **增量式编码器**       | **绝对式编码器**       |
| :----------- | :--------------------- | :--------------------- |
| **工作原理** | 计数脉冲               | 读取唯一二进制码       |
| **断电后**   | **位置丢失**，需回零   | **位置保留**，上电即知 |
| **成本**     | 较低                   | 较高                   |
| **复杂性**   | 简单                   | 复杂                   |
| **抗干扰**   | 差（计数易受干扰丢失） | 强（位置由编码决定）   |
| **典型应用** | 速度测量、相对定位     | 机器人、绝对位置定位   |















编码器主要分为两大类：**增量式编码器**和**绝对式编码器**。

#### 1. 增量式编码器

*   **工作原理**：就像一把没有刻度的“光栅尺”。码盘旋转时，会透过光线或产生磁场变化，输出两路正交（相位差90°）的脉冲信号（通常称为A相和B相）和一路零位信号（Z相）。
    *   **A、B相信号**：用于计算**转过的角度**和**方向**（通过A、B相的超前滞后关系判断正反转）。
    *   **Z相信号**：电机每转一圈，发出一个脉冲，用于确定机械的**绝对零点**，消除累计误差。
*   **特点**：
    *   **上电初始化**：断电后，编码器会“失忆”，不知道当前的位置。每次上电时，电机必须先寻找Z相参考点（“回零”操作）才能确定当前位置。
    *   **成本较低**：结构相对简单，价格更便宜。
    *   **抗干扰**：短时间内的精度高，但如果中途受到干扰导致脉冲丢失，误差会一直累积下去。
*   **输出信号**：方波脉冲（A, B, Z）。

#### 2. 绝对式编码器

*   **工作原理**：就像一把“有刻度的游标卡尺”。它的码盘上有许多圈同心码道，每一条码道对应一个光电传感器。每一圈码道都采用不同的编码方式（如二进制码、格雷码），因此**在任意时刻，编码器输出的唯一数字代码都对应着轴的一个绝对位置**。
*   **特点**：
    *   **断电记忆**：最大的优点。断电后再次上电，它能立刻知道当前的精确位置，无需回零操作。
    *   **可靠性高**：数据直接代表位置，脉冲计数误差不会累积。
    *   **成本较高**：结构复杂，精度越高，码道越多，成本也越高。
*   **输出信号**：并行或串行（如SSI, BiSS, Endat等协议）的数字代码。

**增量式 vs. 绝对式 简单比喻：**
*   **增量式**：告诉你“从刚才到现在，你走了10步”。但如果你忘了起点在哪，就不知道现在身在何处。
*   **绝对式**：直接告诉你“你现在正在第105号位置”。

---

### 四、 按传感技术分类

1.  **光学编码器**：
    *   最常见。使用LED光源、带刻线的码盘和光电传感器。
    *   **优点**：精度非常高，分辨率高。
    *   **缺点**：对灰尘、油污、震动敏感，环境适应性稍差。

2.  **磁性编码器**：
    *   使用磁铁码盘和磁敏传感器（如霍尔传感器）。
    *   **优点**：抗干扰能力强，耐灰尘、油污、震动，成本低，寿命长。
    *   **缺点**：传统上精度和分辨率不如光学式，但近年来技术发展迅速，已接近光学水平。

3.  **电容式编码器**：
    *   较新的技术。利用电容感应的原理来检测码盘的位置。
    *   **优点**：结合了光学的高分辨率和磁式的鲁棒性，性能优异。
    *   **缺点**：成本较高。

---

### 五、 关键参数

*   **分辨率**：编码器能检测到的最小角度变化。通常用**PPR**（每转脉冲数，针对增量式）或**位数**（如17位，表示 2¹⁷ = 131072 个位置/圈，针对绝对式）表示。数值越大，越精细。
*   **精度**：编码器反馈的位置值与真实位置之间的误差。精度 ≠ 分辨率。高分辨率不代表高精度，但高精度通常需要高分辨率。
*   **输出协议**：绝对式编码器与控制器通信的“语言”，如SSI, BiSS-C, Endat, Hiperface等。
*   **防护等级（IP rating）**：如IP65（防尘防水），决定其工作环境。



