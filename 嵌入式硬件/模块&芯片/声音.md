# 声音

## MP3-TF-16P

设置为 9600 波特率 无奇偶校验 我 们 的 模块 默 认 的 波 特 率 为 9600，最后就是“启动串行 端 口 ”，这 样软件就 配 置 好了。这里有两个概念需要明确一 下 第 一是“HEX 码 ”，我们默认是这个，

和校验的思路如下：  发送的指令，去掉起始和结束。将中间的 6 个字节进行累加，最后取反码。

驱动耳机的接口采用24为ADC，音质较好，加上一个功放之后可以驱动一个喇叭。

| 模块电源输入             | VCC   | BUSY   | 有音频输出低，无音频输出高       |
| ------------------------ | ----- | ------ | -------------------------------- |
| UART 串行数据输入        | RX    | USB-   | 接 U 盘或插电脑的 USB 口         |
| UART 串行数据输出        | TX    | USB+   | 接 U 盘或插电脑的 USB 口         |
| 音频输出右声道 耳机/功放 | DAC_R | ADKEY2 | 当触发时是第五段(长按循环第五段) |
| 音频输出左声道 耳机/功放 | DAC_L | ADKEY1 | 当触发时是第一段(长按循环第一段) |
| 喇叭+                    | SPK1  | IO2    | 下一首/长按音量加                |
| 地                       | GND   | GND    | 地                               |
| 喇叭-                    | SPK2  | IO1    | 上一首/长按音量减                |

格式：$S VER Len CMD Feedback para1 para2 checksum $O 

格式：

1. 以$S开始，也就是0X7E。
2. VER版本，默认为0XFF。
3. Len，len 后字节个数 校验和不计算在内。
4. CMD，命令字 表示具体的操作,比如播放/暂停等等。
5. Feedback命令反馈，是否需要反馈信息，1反馈，0不反馈。
6. para1，查询的数据高字节(比如歌曲序号)。
7. para2，查询的数据低字节(比如歌曲序号)。
8. checksum，校验和[占两个字节]，累加和校验[不计起始位$]。
9. $O结束位，也就是0xEF。

| 功能       | 发送的命令[带校验]              | 发送的命令[不带校验]     | 备注                                      |
| ---------- | ------------------------------- | ------------------------ | ----------------------------------------- |
| [下一首]   | 7E FF 06 01 00 00 00 FE FA EF   | 7E FF 06 01 00 00 00 EF  |                                           |
| [上一首]   | 7E FF 06 02 00 00 00 FE F9 EF   | 7E FF 06 02 00 00 00 EF  |                                           |
| [指定曲目] | 7E FF 06 03 00 [X] [Y] FE F7 EF | 7E FF 06 03 00 00 [X] EF | 指定播放第X(1~99)文件夹下第Y(1~256)首歌曲 |
| [指定音量] | 7E FF 06 06 00 00 [X] FE D7 EF  | 7E FF 06 06 00 00 [X] EF | 指定音量为 X 级                           |
|            |                                 |                          |                                           |
|            |                                 |                          |                                           |
|            |                                 |                          |                                           |
|            |                                 |                          |                                           |
|            |                                 |                          |                                           |
|            |                                 |                          |                                           |
|            |                                 |                          |                                           |

格式：起始位0x7E 每条命令反馈均以$开头,即0x7E  VER 版本 版本信息[目前默认为0xff]  Len len 后字节个数 校验和不计算在内  CMD 命令字 表示具体的操作,比如播放/暂停等等  Feedback 命令反馈 是否需要反馈信息,1反馈,0不反馈  para1 参数1 查询的数据高字节(比如歌曲序号)  para2 参数2 查询的数据低字节  checksum 校验和[占两个字节] 累加和校验[不计起始位$]  $O 结束位 结束位0xEF

指定曲目播放[按照物理顺序]

指定曲目播放[按照文件夹和文件名的名称]

 指定曲目播放[按照文件名，必须在 MP3 文件夹下]