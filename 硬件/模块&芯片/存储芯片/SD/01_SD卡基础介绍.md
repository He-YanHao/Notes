# SD卡基础介绍与分类

## 基础介绍

一张SD卡包括有存储单元、存储单元接口、电源检测、卡及接口控制器和接口驱动器5个部分。

-   **存储单元**是存储数据部件，存储单元通过**存储单元接口**与**卡控制单元**进行数据传输；
-   **电源检测单元**保证SD卡工作在合适的电压下，如出现掉电或上状态时，它会使控制单元和存储单元接口复位；
-   **卡及接口控制单元**控制SD卡的运行状态，它包括有8个寄存器；
-   **接口驱动器**控制SD卡引脚的输入输出。



## 按照外形分类

| 类型             | 尺寸       | 说明                                         |
| ---------------- | ---------- | -------------------------------------------- |
| **SD**           | 32 × 24 mm | 标准卡，在有些相机或者PC电脑上会使用。       |
| **miniSD**       | 已淘汰     | 不再使用，现在极其少见。                     |
| **microSD / TF** | 15 × 11 mm | 嵌入式主流，手机里面使用的内存卡就是这种卡。 |



## 按容量与协议版本分类

这是**初始化流程、寻址方式、驱动逻辑**差异最大的分类方式。

| 类型     | 全称              | 容量范围      | 协议版本 | 寻址方式           |
| -------- | ----------------- | ------------- | -------- | ------------------ |
| **SDSC** | Standard Capacity | ≤ 2 GB        | SD v1.x  | **字节寻址**       |
| **SDHC** | High Capacity     | 4 GB – 32 GB  | SD v2.0  | **块寻址（512B）** |
| **SDXC** | eXtended Capacity | 64 GB – 2 TB  | SD v3.0+ | **块寻址（512B）** |
| **SDUC** | Ultra Capacity    | 2 TB – 128 TB | SD v7.0+ | 块寻址             |



## 按总线/接口模式分类（驱动重点）

### SD Mode（原生 SD 模式）

| 特性     | 说明                |
| -------- | ------------------- |
| 引脚     | CMD, CLK, DAT0–DAT3 |
| 总线宽度 | 1-bit / 4-bit       |
| 速度     | 高                  |
| 常见平台 | STM32 / GD32 / i.MX |

**特点**

-   初始化复杂
-   性能好
-   支持 DMA

### SPI Mode（兼容模式）

| 特性     | 说明                  |
| -------- | --------------------- |
| 引脚     | CS, SCK, MOSI, MISO   |
| 总线宽度 | 1-bit                 |
| 速度     | 低                    |
| 常见平台 | 小 MCU / 无 SDIO 外设 |

**特点**

-   初始化简单
-   驱动容易
-   性能有限

>   **同一张 SD 卡，上电后可选择进入 SD Mode 或 SPI Mode**



## 按速度等级分类（性能约束）

>   这部分 **对文件系统和缓存设计有意义**，对底层驱动影响不大。

### Speed Class（老标准）

| 标识     | 最低顺序写入 |
| -------- | ------------ |
| Class 2  | 2 MB/s       |
| Class 4  | 4 MB/s       |
| Class 10 | 10 MB/s      |

### UHS Speed Class（SDHC/SDXC）

| 标识 | 最低写入 |
| ---- | -------- |
| U1   | 10 MB/s  |
| U3   | 30 MB/s  |

### Video Speed Class（视频）

| 标识 | 写入    |
| ---- | ------- |
| V30  | 30 MB/s |
| V60  | 60 MB/s |
| V90  | 90 MB/s |

-   **MCU SDIO 几乎跑不到这些上限**
-   更重要的是 **写入稳定性而非峰值**



## 按总线速度模式分类（协议能力）

| 模式          | 最大频率                  |
| ------------- | ------------------------- |
| Default Speed | 25 MHz                    |
| High Speed    | 50 MHz                    |
| UHS-I         | 104 MHz                   |
| UHS-II / III  | 双排引脚（MCU基本不支持） |



