# 欠压保护

## 什么是欠压保护

**欠压保护**，也称为**欠电压锁定**，是一种电源管理功能。它的核心作用是：当供电电压**低于**一个预设的阈值时，自动关闭或断开后续的电路，防止系统在不稳定的低压下工作。

可以把它想象成一个**电压“看门狗”**：

-   当电压正常时，它允许系统运行；
-   电压低到危险程度，它就会“吠叫”并强制系统关机，直到电压恢复正常。



### 为什么需要欠压保护

欠压保护的主要目的不是防止设备“不工作”，而是防止设备在**异常状态下工作**而导致的各种问题：

**防止微控制器/逻辑电路 malfunction**

*   微控制器、DSP、FPGA等数字芯片有严格的工作电压范围。电压过低时，其内部逻辑会变得不稳定，可能出现程序跑飞、寄存器数据丢失、I口状态不确定等异常行为。UVLO能确保芯片只在安全的电压下启动和运行。

**保护功率器件（如MOSFET）**

*   在开关电源和电机驱动中，MOSFET的完全导通需要栅极电压达到一定值。如果驱动电压不足，MOSFET会工作在线性区而非饱和区，导致其导通电阻急剧增大，产生巨大的热量而烧毁。UVLO可以防止这种情况发生。

**避免电池过放**

*   对于锂电池或铅酸电池供电的设备，深度放电会对电池造成**永久性损伤**，大幅缩短其寿命。欠压保护是电池管理系统最重要的功能之一，能在电压降至最低允许值前切断负载，保护电池。

**确保系统可靠性**

*   一个在低压下勉强工作的系统，其性能会严重下降，并且行为不可预测。强制其在低压下关机，可以避免产生错误的数据或执行错误的动作，提高整体系统的可靠性。



### 欠压保护的实现方式

实现欠压保护主要有两种方法：

#### 使用专用的UVLO芯片或集成UVLO的电源管理IC

这是最简单、最可靠的方式。绝大多数现代的电源芯片、LDO、DC-DC转换器和微控制器内部都**集成了UVLO功能**。

*   **工作原理**：芯片内部有一个电压基准和一个比较器。它持续监测输入电压或内部电源。当电压低于触发阈值时，芯片会保持复位状态或关闭输出；当电压回升并高于另一个（通常稍高的）释放阈值时，芯片才恢复正常工作。这种“迟滞”特性防止了在阈值电压附近反复开关的振荡现象。


*   **优点**：无需外部电路，精度高，可靠性好。



#### 使用分立元件搭建（比较器方案）

当使用的芯片没有集成UVLO时，可以用一个比较器、一个电压基准和几个电阻来自行搭建。

*   **工作原理**：
    1.  电阻分压网络对输入电压进行采样。
    2.  采样后的电压与一个稳定的电压基准进行比较。
    3.  当采样电压（代表输入电压）低于基准电压时，比较器输出翻转，从而控制一个MOSFET来切断后续电路的供电，或向MCU的复位引脚发送信号。


*   **优点**：灵活，阈值可调。
*   **缺点**：需要额外的元器件，增加成本和PCB空间，精度和稳定性不如专用芯片。



### 关键参数与设计要点

在设计或选择欠压保护电路时，需要关注以下几个关键参数：

1.  **欠压锁定阈值**
    *   **这是核心参数**。你需要根据被保护电路的最低工作电压和电池的放电曲线来设定。例如，对于标称3.3V的系统，UVLO阈值可能设置在3.1V或3.0V。

2.  **迟滞**
    *   这是**释放阈值**与**锁定阈值**之间的电压差。
    *   **为什么需要迟滞？** 如果没有迟滞，当电压在阈值点附近因负载波动而轻微变化时，保护电路会频繁地动作和释放，导致系统不断重启。迟滞确保了保护动作的确定性。
    *   **例如**：UVLO触发阈值为3.0V，迟滞为0.2V。那么当电压低于3.0V时系统关闭，必须等到电压回升到3.2V以上，系统才会重新启动。

3.  **响应速度**
    *   保护电路需要对电压的快速跌落做出迅速反应，以防止在保护动作完成前系统已经失效。



### 锂电池供电设备案例

假设一个设备由单节锂电池（标称3.7V， 工作范围3.0V~4.2V）供电，使用一个3.3V的LDO为MCU和传感器供电。

**风险**：如果不加保护，电池会一直放电到远低于3.0V，导致永久损坏。

**解决方案**：

1.  **方案A**：选择一个带有UVLO功能的LDO，并将其欠压阈值设置为3.2V。当电池电压跌至3.2V时，LDO自动关闭输出。
2.  **方案B**：使用一个专门的电池保护IC，其欠压保护点通常设置在2.5V~3.0V之间（根据电芯化学特性设定），直接在电池端进行保护。
3.  **方案C**：在MCU的ADC引脚上通过电阻分压监测电池电压，当软件检测到电压过低时，执行安全关机程序并向用户报警。

