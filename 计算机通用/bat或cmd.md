# bat或cmd脚本

脚本后缀为 ` .bat ` 或 ` .cmd ` ，为Windows批处理文件。

## 如何查看教程

使用 ` help 命令 ` 的形式可以查看教程。如 ` help dir ` 。

或 ` 命令 /? ` 的形式查看。如 ` dir /? ` 。

## 一般格式

关键词 参数 路径

## 基础命令

### echo

```bat
@echo off ::关闭输出时的命令本身和路径，简化输出。
echo Hello World! ::输出Hello World! 
pause ::暂停
```

echo会输出后面跟随的语句。如果说要输出空行，则需要：

```
echo.
```

### ^ nul @

#### 转义符

普通符号可以直接输出，但特殊符号需要转义符。

特殊符号包括` ^ > >> & && | || ` 。

` bat ` 转义符为 ` ^ ` ，可以用 ` ^ ` 输出特殊符号。

#### ` % ` 

` % ` 也比较特殊，DOC环境下可以正常输出，bat环境下仅输出%数量除二去除余数的数量的%。

` % ` 还可以用于输出变量

```
echo abc ::输出abc
echo %abc% ::abc代表的变量
```

#### 重定向

可以使用重定向的形式将输出内容输出到文件里，如：

```
echo Hello World!>test.txt ::输出内容会被定向到test.txt里，若无该文件则创建，每次输出刷新该文件。
echo Hello World!>>test.txt ::输出内容会被定向到test.txt里，若无该文件则创建，每次追加在该文件末尾。
```

其中

```
>nul
```

为丢弃标准输出。

```
2>nul
```

为丢弃错误输出。

```
>nul 2>&1
```

为丢弃标准输出。

#### 隐藏执行过程

` @ ` 后面的语句执行，但不显示任何语句。

```
@
```

### 注释rem

可以使用

```
rem
```

```
::
```

中的一个来注释，效果相同。

> 当关闭回显时，` rem ` 和 ` :: ` 后的内容都不会显示，但是当打开回显时，` rem ` 后的内容会显示出来，然而 ` :: ` 后的内容仍然不会显示。 

注解批处理时，注解的标准写法是写在被注解程序的上一行。

### pause

暂停，按任意键继续。

### 终端

#### title

可以改变终端的标题。

#### color

可以改变终端背景和文字的颜色

格式为：

```
color XY
```

X为终端背景的颜色，Y为终端文字的颜色。

| 0=黑色   | 1=蓝色   | 2=绿色   | 3=湖蓝色   |
| -------- | -------- | -------- | ---------- |
| 4=红色   | 5=紫色   | 6=黄色   | 7=白色     |
| 8=灰色   | 9=淡蓝色 | A=淡绿色 | B=淡浅绿色 |
| C=淡红色 | D=淡紫色 | E=淡黄色 | F=亮白色   |

#### mode

改变终端的大小

```
mode con cols=113 lines=15 ::宽113 高15
```

### set

输入指令

```
set 变量名=____ ::清除变量名的方式就是赋值处什么也不写。
```

想要自己输入变量就加 ` /p ` 参数：

```
set /p 变量名=____ ::会将____输出，而不是作为变量内容。
```

 ` /a ` 参数可以将 ` = ` 后面的视为数学表达式，如：

```
set /a 变量名=10+变量名 ::不然会把 10+变量名 整体视为字符串。
```

### goto :

goto可以跳转到指定位置，用 ` : ` 打标签。如：

```
goto :ti
echo 123
:ti
```

则运行后会跳过输出123。

### start

启动另一个终端执行命令，格式为：

```
start title [] 路径
```

可以添加更多参数。

` /wait ` 该参数可以等待启动的程序结束后结束终端。

### call

可以调用其他的批处理文件。格式为：

```
call 路径/文件名.bat
```

会等待调用的程序结束继续执行。

有和goto类似的用法

```
call :ti
echo 123
:ti
```

也会跳转到 ` :ti ` ，然后再执行完毕后回到开始跳转的位置继续执行。 

### shift？？？

## 逻辑判断命令

### if

仅==可以用条件判断符号表示，其余不能使用条件判断符号，只能使用英文简写。

| 符号 | 对应条件判断符号 | 作用 |
| ---- | ---------------- | ---- |
| equ  | ==               |      |
| neq  | !=               |      |
| lss  | <                |      |
| leq  | <=               |      |
| gtr  | >                |      |
| geq  | \>=              |      |

案例：

```
@echo off
set abc=0
rem 分行写的时候要注意空格
if %abc%==1 ( echo yes ) else ( echo no )
rem ==要连写，不加空格；equ加空格。
pause
```

可以用来判断字符串，字符串用 ` " " ` 包围起来。**` /i ` 忽略大小写。**

```
if "abc"=="ABC" ( echo yes ) else ( echo no )
rem 显然是 no
if /i "abc"=="ABC" ( echo yes ) else ( echo no )
rem /i忽略大小写，所以是yes
```

> 左括号 ` ( ` 不是批处理命令，我们无法单独执行 ` ( ` ，所以左括号必须和上面命令同行。而右括号“)”是回应前面离它最近的左括号， 所以它可以位于程序的任何地方。
>
> 因为 ` if ` 才是批处理命令，而 ` else ` 不是，我们无法单独执行 ` else ` 。而批处理的执行是认行不认命令数目，所以 ` else ` 必须和 ` if ` 在同一行上。但是加转义符可以解决这个问题。如：
>
> ```
> if %abc%==1 ( echo yes )^
> else ( echo no 
> )
> ```

> 数字用 ` % % ` ，字符串用 ` " " ` 。
>
> 如果是` "% %" `是将变量代表的数字转化为字符串。











































## 特殊知识点

### 复合语句

被括号括起来的称为复合语句。无论是一句还是很多句。

### 延迟变量

批处理中计算机无法实时获取复合语句内的变量！

%var%获得的是复合语句前变量的值，要想实时获得复合语句里变量的动态值，就要使用延迟变量，并且符号要要用!var!，所以变量延迟适用范围是：如果在复合语句中，并且要实时获得变量的动态值， 就要使用延迟变量。

```
setlocal enabledelayedexpansion ::开启延迟变量
setlocal disabledelayedexpansion ::关闭延迟变量
```

### ？

`ren`为重命名

`del`为删除

对于名称中存在空格的，使用双引号括起来。

`md`为创建文件

提取当前目录下扩展名为mp3的文件名，输出到`mp3文件名.txt`

`dir *.mp3 /b>mp3.txt`

