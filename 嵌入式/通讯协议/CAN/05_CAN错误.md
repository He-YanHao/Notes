## CAN错误

错误状态的种类单元始终处于 3 种状态之一。

- **主动错误状态**：主动错误状态是可以正常参加总线通信的状态。 处于主动错误状态的单元检测出错误时，输出包含 6 个显性 0 的主动错误标志破坏通信。

- **被动错误状态**：处于被动错误状态的单元虽能参加总线通信，但为不妨碍其它单元通信，接收时不能积极地发送错误通知。 处于被动错误状态的单元检测出错误时，输出包含 6 个隐性 1 的被动错误标志，不可破坏总线通信。

    处于被动错误状态的单元即使检测出错误，而其它处于主动错误状态的单元如果没发现错误，整个总线也被认为是没有错误的。  

    另外，处于被动错误状态的单元在发送结束后不能马上再次开始发送。在开始下次发送前，在间隔帧期间内必须插入“延迟传送”(8 个位的隐性位)。

- **总线关闭态**：总线关闭态是不能参加总线上通信的状态。 信息的接收和发送均被禁止。 这些状态依靠发送错误计数和接收错误计数来管理，根据计数值决定进入何种状态。

每个设备内部管理一个发送错误计数器TEC和发送错误计数器REC，通过二者的数量判断状态。

设备默认处于主动错误状态，权力最大，可以发送主动错误帧破坏通信。出现过多错误（TEC或REC 大于 127 时）进入被动错误状态，在被动错误状态减小了TEC或REC的值可以恢复主动错误状态。当 TEC > 255 时，进入总线关闭状态，在总线上检测到128次连续的11个隐性位则恢复主动错误状态。

