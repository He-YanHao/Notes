# 位置式PID与增量式PID

核心区别在于 **“输出的是什么”** 和 **“如何计算这个输出”**。

## 核心概念快速预览

| 特性              | 位置式PID                                             | 增量式PID                                                    |
| :---------------- | :---------------------------------------------------- | :----------------------------------------------------------- |
| **输出量**        | **绝对位置**（执行机构的绝对位置，如阀门开度0%-100%） | **增量/变化量**（执行机构需要增加或减少的量，如阀门再开大5%） |
| **数学本质**      | 直接计算当前时刻**系统偏差**的函数                    | 计算相邻两次**位置式输出**的**差值**的函数                   |
| **积分项影响**    | 所有历史误差的累积（积分项），易产生**积分饱和**      | 仅与最近几次误差有关，**无积分累积**，不会积分饱和           |
| **应用场景**      | 执行机构需要明确位置控制的系统（如阀门、平衡杆）      | 执行机构本身是积分环节的系统（如步进电机、储能系统）         |
| **安全性**        | 若发生故障，输出突变可能造成危险                      | 若发生故障，输出增量为零，系统更安全                         |
| **手动/自动切换** | 需进行无扰动切换处理                                  | 可实现无扰动的无缝切换                                       |



## 从数学公式上理解区别

假设在 k 时刻：

*   `e(k)`：当前偏差（设定值 - 测量值）
*   `e(k-1)`：上一次偏差
*   `e(k-2)`：上上次偏差
*   `Kp`, `Ki`, `Kd`：比例、积分、微分系数

### 位置式PID

位置式PID的输出 `u(k)` **直接对应执行机构的绝对位置**。

**计算公式：**
$$
u(k) = Kp * e(k) + Ki * Σ[e(j)] + Kd * [e(k) - e(k-1)]
$$


​          (比例项)    (积分项：从j=0到k的误差累加)  (微分项)

**特点：**

*   **积分项 `Σ[e(j)]`**：累加了从开始到现在**所有历史误差**。这是导致“积分饱和”问题的根源。如果系统存在一个方向的持续偏差（例如阀门一直打不开），积分项会变得非常大，即使偏差减小了，系统也需要很长时间来“消化”这个巨大的积分项，导致响应迟缓。
*   输出 `u(k)` 是一个绝对值，直接告诉执行机构“你应该在XX这个位置”。

### 增量式PID

增量式PID的输出 `Δu(k)` **是本次输出相对于上一次输出的变化量**。

**计算公式（可通过位置式公式推导得出）：**
$$
Δu(k) = u(k) - u(k-1)
$$

$$
Δu(k) = Kp * [e(k) - e(k-1)] + Ki * e(k) + Kd * [e(k) - 2e(k-1) + e(k-2)]
$$

**特点：**

*   公式中**没有累加项（Σ）**，输出只与最近三次的偏差 `e(k)`, `e(k-1)`, `e(k-2)` 有关。
*   它告诉执行机构“请在你上次的位置基础上，再增加/减少 `Δu(k)` 这么多”。
*   因为不累积历史误差，所以从原理上就**不会产生积分饱和**问题。



## 核心区别与优缺点

### 积分饱和与系统安全性

*   **位置式PID**：易积分饱和，在启动、大幅度设定值变化或执行机构被卡住时，饱和的积分项会导致系统超调大、响应慢，甚至产生危险。
*   **增量式PID**：根本不存在积分饱和问题，系统行为更安全。这也是它的一大优势。

### 手动/自动模式的无扰切换

*   **位置式PID**：从手动切换到自动时，必须先将控制器的输出值手动设置为当前执行机构的实际位置值，否则切换瞬间 `u(k)` 会跳变，造成系统冲击。
*   **增量式PID**：切换时非常自然。因为手动模式下，`Δu(k)` 自然为零（操作员没有给出改变指令）；切换到自动时，控制器继续计算增量，实现了真正的**无扰切换**。

### 算力需求与是否带积分记忆

*   **位置式PID**：需要存储和累加所有误差值，对计算能力和存储空间要求稍高。
*   **增量式PID**：只需存储最近两次的偏差值，计算量小，实现更简单。但代价是它“遗忘”了更早的历史，积分作用不如位置式完整。

### 执行机构类型

*   **位置式PID**：适用于控制**本身没有积分功能**的执行机构。例如：电液伺服阀、模拟式调压阀。你需要直接告诉它“开到50%”。
*   **增量式PID**：非常适合控制**本身具有积分功能**或**需要的是脉冲**的执行机构。例如：**步进电机**（你告诉它“正转10个脉冲”，它就会在当前位置基础上转10步）、调节阀的步进电机驱动器。



## 总结

| 方面           | 位置式PID          | 增量式PID                |
| :------------- | :----------------- | :----------------------- |
| **本质**       | 直接定位           | 控制步进                 |
| **积分问题**   | 易积分饱和         | **无积分饱和**           |
| **安全性**     | 较低               | **较高**                 |
| **切换便利性** | 需预处理           | **无扰切换**             |
| **算力需求**   | 稍高               | **较低**                 |
| **适用执行器** | 非积分型（如阀门） | **积分型**（如步进电机） |

在现代实际应用中，**增量式PID因其安全、可靠、易于实现无扰切换等优点，使用更为广泛**。很多先进的数字PID控制器虽然在接口上看起来是位置式（设定一个目标值），但其内部算法实际上是采用增量式计算，然后再进行累加输出，从而兼具了增量式的优势和外部的易用性。